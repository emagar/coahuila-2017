rm(list = ls())

setwd("/home/eric/Dropbox/data/elecs/MXelsCalendGovt/reelec/coa2017/encuestaMoreno")

library(foreign)
dat <- read.spss(file = "EFCOAH_MAY17.sav", to.data.frame = TRUE)

colnames(dat)

## 1 En su opinión, ¿cuál es el principal problema que hay actualmente en el Estado de Coahuila? (ANOTAR TEXTUAL)
## 2 Por lo general, ¿cuánto le interesa la política? (LEER)
## 3 ¿Sabe cuándo son las próximas elecciones para Gobernador del estado? (NO LEER: 4 DE JUNIO 2017)
## 4 Del 0 a 10, donde 0 es nada probable y 10 muy probable, ¿qué tan probable es que usted vote en las próximas elecciones para gobernador?
## 5 (USAR BOLETA 1) Si hoy hubiera elecciones para Gobernador del estado, ¿por quién votaría usted?
## 6 ¿Usted ya decidió definitivamente por quién votar para gobernador, tiene idea pero podría cambiar o aún no decide su voto?
## 7 ¿Cuál es su opinión acerca de los siguientes personajes políticos: muy buena, buena, mala, muy mala,... o no lo conoce suficiente para opinar? (LEER Y ROTAR NOMBRES)
##   a Guillermo Anaya Llamas       
##   b Miguel Ángel Riquelme        
##   c Mary Telma Guajardo Villareal
##   d José Ángel Pérez Hernández   
##   e Armando Guadiana Tijerina    
##   f Javier Guerrero García       
##   g Luis Horacio Salinas Valdez  
## 8 ¿Si la elección para gobernador solamente fuera entre Guillermo Anaya y Miguel Riquelme, ¿por quién votaría usted?
## 9 ¿Quién cree que gane la elección para gobernador? (LEER)
## 10 De los siguientes asuntos que le voy a leer, dígame por favor cuál es el más importante que debe atender el próximo gobernador del estado: (LEER)
## 11 (USAR BOLETA 2) Si hoy hubiera elecciones para Diputados Locales, ¿por cuál partido votaría usted?
## 12 (USAR BOLETA 3) Si hoy hubiera elecciones para Presidente Municipal, ¿por cuál partido votaría usted?
## 13 ¿Votó usted en las elecciones para gobernador en julio de 2011? (SÍ) ¿Por quién votó usted? (LEER OPCIONES)
## 14 En general, ¿usted aprueba o desaprueba el trabajo que Rubén Moreira está haciendo como Gobernador del estado? (INSISTIR): ¿APRUEBA/DESAPRUEBA mucho o algo?
## 15 En general, ¿está satisfecho o insatisfecho con la manera en que marchan las cosas en el estado? (INSISTIR: ¿Muy o algo?) (5=NS/NC)
## 16 En general, ¿usted aprueba o desaprueba el trabajo que Enrique Peña Nieto está haciendo como Presidente de la República? (INSISTIR): ¿APRUEBA/DESAPRUEBA mucho o algo?
## 17 ¿Cómo calificaría en estos momentos... (LEER):? muy bien, bien, mal o muy mal?
##   a La situación económica del estado
##   b Su situación económica familiar
##   c La seguridad pública en la comunidad donde vive
## 18 Generalmente, ¿usted se considera priista, panista, perredista morenista? (INSISTIR): ¿Se considera muy o algo?
## 19 (TARJETA 1) En política la gente habla de “la izquierda” y “la derecha”. En general, ¿cómo colocaría usted sus puntos de vista en esta escala, donde 1 es izquierda y 10 es derecha? También puede escoger un punto intermedio.
## 20 ¿Está usted a favor, en contra o le es indiferente la reelección consecutiva de legisladores?
## 21 El 3 de abril iniciaron las campañas para renovar el Congreso del Estado. Si yo le preguntara los nombres de los candidatos a diputado en este distrito, ¿usted me podría decir todos los nombres, algunos nombres o no recuerda ningún nombre en este momento?
## 22 Ahora piense por favor en los diputados locales actuales. Si yo le preguntara las cosas que ha hecho su diputado por esta comunidad, ¿usted podría mencionarme muchas cosas, algunas, diría que no hizo nada o no recuerda en este momento?
## 23 Si su actual diputado compitiera para buscar la reelección, ¿usted votaría por él o no votaría por él?
## 24 Con base en el trabajo realizado por su actual diputado, ¿cree que merecería ser reelecto en su cargo o no?
## 25 Le voy a leer unos nombres, para cada uno, ¿podría decirme si le es muy conocido, algo conocido, poco o nada conocido?
##   a Javier Díaz González     
##   b Lily Gutiérrez Burciaga  
##   c Georgina Cano Torralva   
##   d Ana Isabel Durán         
##   e Sonia Villareal          
##   f Lariza Montiel           
##   g Armando Pruneda          
##   h Leonel Contreras Pámanes 
##   i Florencio "Lencho" Siller
## 26 En los últimos 12 meses, ¿usted o alguien de su familia... (LEER)
##   a Perdió su empleo o fuente de ingresos económicos?
##   b Fue víctima de algún delito o un asalto?
##   c Tuvo que dar alguna mordida
## 27 Por lo general, ¿cuánto se entera de las noticias por medio de... (LEER), mucho, algo, poco o nada?
##   a Televisión
##   b Radio
##   c Periódico
##   d Pláticas con gente
##   e Internet
## f Redes sociales
## 28 ¿Utiliza Facebook?
## 29 ¿Utiliza Twitter?
## 30 ¿Tiene Smartphone o teléfono inteligente?
## 31 ¿Usted o alguien en su hogar es beneficiario de... (LEER)?
##   a Oportunidades/Prospera
##   b Seguro Popular
##   c Algún programa social del gobierno del estado
## 32 Durante estas campañas electorales, ¿a usted o alguien en su hogar... (LEER)?
##   a Le han dado algún obsequio los partidos o candidatos
##   b Ha asistido a eventos de los partidos o candidatos
## 33 Si los candidatos a la Presidencia de la República en 2018 fueran los siguientes, ¿por quién votaría usted? (LEER Y ROTAR)
## 34 ¿Cuál es su opinión acerca de los siguientes personajes políticos: muy buena, buena, mala, muy mala,... o no lo conoce suficiente para opinar? (LEER Y ROTAR NOMBRES)
##   a Andrés Manuel López Obrador
##   b Margarita Zavala
##   c Miguel Ángel Osorio Chong
##   d Humberto Moreira
## 35 Juntando el dinero que usted y otros miembros de su familia ganan al mes, ¿diría que...? (LEER)
## A ¿Hasta qué año o grado aprobó (pasó) en la escuela? ¿Cuál es su último grado de estudios? [NS/NC=9]
## B ¿Cuál es su principal ocupación, a qué se dedica usted? (ANOTAR TEXTUAL)
## C ¿De qué religión es usted? (LEER Y ROTAR)
## D ¿Con qué frecuencia asiste usted a servicios religiosos? (LEER)


table(dat$Mun)
table(dat$Secc) # confirmar c Alejandro que es sección electoral; 14 encuestados por sección es la cuota?

str(dat)

# dummies de partido
tmp <- as.numeric(dat$p18) # quita factor
dat$dpan <- as.numeric(tmp==3 | tmp==4)
dat$dpri <- as.numeric(tmp==1 | tmp==2)
dat$dprd <- as.numeric(tmp==5 | tmp==6)
dat$dmorena <- as.numeric(tmp==7 | tmp==8)
dat$dindep <- as.numeric(tmp==10 | tmp==11)
table(dat$dpri)

# dummy de que diputado ha hecho algo
tmp <- as.numeric(dat$p22) # quita factor
dat$dhaHecho <- as.numeric(tmp==1 | tmp==2)


# dummy de interés
tmp <- as.numeric(dat$p2) # quita factor
dat$dinteresaPol <- as.numeric(tmp==1 | tmp==2)
tmp <- as.numeric(dat$p3) # quita factor
dat$dsabeFecha <- as.numeric(tmp==1)

# a favor reeleccion
tmp <- as.numeric(dat$p20) # quita factor
dat$dfavorReel <- as.numeric(tmp==1)

# name recognition
tmp <- as.numeric(dat$p21) # quita factor
dat$drecuerda <- as.numeric(tmp==1 | tmp==2)

# conoce a Javier Díaz González
tmp <- as.numeric(dat$p25a) # quita factor
dat$dconoceJavier <- as.numeric(tmp==1 | tmp==2 | tmp==3)
# conoce a Lily Gutiérrez
tmp <- as.numeric(dat$p25b) # quita factor
dat$dconoceLily <- as.numeric(tmp==1 | tmp==2 | tmp==3)
# conoce a Georgina Cano
tmp <- as.numeric(dat$p25c) # quita factor
dat$dconoceGina <- as.numeric(tmp==1 | tmp==2 | tmp==3)
# conoce a Ana Isabel Durán
tmp <- as.numeric(dat$p25d) # quita factor
dat$dconoceAnaIsabel <- as.numeric(tmp==1 | tmp==2 | tmp==3)
# conoce a Sonia Villarreal
tmp <- as.numeric(dat$p25e) # quita factor
dat$dconoceSonia <- as.numeric(tmp==1 | tmp==2 | tmp==3)
# conoce a Lariza Montiel
tmp <- as.numeric(dat$p25f) # quita factor
dat$dconoceLariza <- as.numeric(tmp==1 | tmp==2 | tmp==3)
# conoce a Armando Pruneda
tmp <- as.numeric(dat$p25g) # quita factor
dat$dconoceArmando <- as.numeric(tmp==1 | tmp==2 | tmp==3)
# conoce a Leonel Contreras
tmp <- as.numeric(dat$p25h) # quita factor
dat$dconoceLeonel <- as.numeric(tmp==1 | tmp==2 | tmp==3)
# conoce a Lencho Siller
tmp <- as.numeric(dat$p25i) # quita factor
dat$dconoceLencho <- as.numeric(tmp==1 | tmp==2 | tmp==3)

table(dat$dconoceAnaIsabel)

# lee mapa electoral
mapa <- read.csv("../redisCoa/coaDisn14toDisn17.csv")
colnames(mapa)
# crea categorías 
mapa$huizacheLily <- mapa$adquiridoLily <- mapa$conservadoLily <- mapa$perdidoLily <- 0
# identifica secciones pertenecientes a distrito del viejo/nuevo mapa de Lily Gtz
sel1 <- as.numeric(mapa$disn14==5)
sel2 <- as.numeric(mapa$disn17==12)
# codifica categorías
mapa$perdidoLily[sel1==1 & sel2==0] <- 1
mapa$conservadoLily[sel1==1 & sel2==1] <- 1
mapa$adquiridoLily[sel1==0 & sel2==1] <- 1
mapa$huizacheLily[sel1==0 & sel2==0] <- 1
# verifica que categorías sean exhaustivas y mutuamente excluyentes
#table(rowSums(mapa[,c("perdido","conservado","adquirido","huizache")]))
# explora
table(mapa$perdidoLily)
table(mapa$conservadoLily)
table(mapa$adquiridoLily)
table(mapa$huizacheLily)
# habrá que exportar secciones de cada
#mapa$seccion[which(mapa$conservadoLily==1)]
# manda info a datos encuesta
dat$dperdidoLily <- 0;    dat$dperdidoLily[which(dat$Secc %in% mapa$seccion[which(mapa$perdidodoLily==1)])] <- 1
dat$dconservadoLily <- 0; dat$dconservadoLily[which(dat$Secc %in% mapa$seccion[which(mapa$conservadoLily==1)])] <- 1
dat$dadquiridoLily <- 0;  dat$dadquiridoLily[which(dat$Secc %in% mapa$seccion[which(mapa$adquiridoLily==1)])] <- 1
#
# crea categorías 
mapa$huizacheJavier <- mapa$adquiridoJavier <- mapa$conservadoJavier <- mapa$perdidoJavier <- 0
# identifica secciones pertenecientes a distrito del viejo/nuevo mapa de Javier Gtz
sel1 <- as.numeric(mapa$disn14==1)
sel2 <- as.numeric(mapa$disn17==14)
# codifica categorías
mapa$perdidoJavier[sel1==1 & sel2==0] <- 1
mapa$conservadoJavier[sel1==1 & sel2==1] <- 1
mapa$adquiridoJavier[sel1==0 & sel2==1] <- 1
mapa$huizacheJavier[sel1==0 & sel2==0] <- 1
# verifica que categorías sean exhaustivas y mutuamente excluyentes
#table(rowSums(mapa[,c("perdido","conservado","adquirido","huizache")]))
# explora
table(mapa$perdidoJavier)
table(mapa$conservadoJavier)
table(mapa$adquiridoJavier)
table(mapa$huizacheJavier)

table(mapa$mun, mapa$munn)

# habrá que exportar secciones de cada
#mapa$seccion[which(mapa$conservadoJavier==1)]
# manda info a datos encuesta
dat$dperdidoJavier <- 0;    dat$dperdidoJavier[which(dat$Secc %in% mapa$seccion[which(mapa$perdidodoJavier==1)])] <- 1
dat$dconservadoJavier <- 0; dat$dconservadoJavier[which(dat$Secc %in% mapa$seccion[which(mapa$conservadoJavier==1)])] <- 1
dat$dadquiridoJavier <- 0;  dat$dadquiridoJavier[which(dat$Secc %in% mapa$seccion[which(mapa$adquiridoJavier==1)])] <- 1

# crea categorías 
mapa$huizacheGina <- mapa$adquiridoGina <- mapa$conservadoGina <- mapa$perdidoGina <- 0
# identifica secciones pertenecientes a distrito del viejo/nuevo mapa de Gina Gtz
sel1 <- as.numeric(mapa$disn14==15)
sel2 <- as.numeric(mapa$disn17==1)
# codifica categorías
mapa$perdidoGina[sel1==1 & sel2==0] <- 1
mapa$conservadoGina[sel1==1 & sel2==1] <- 1
mapa$adquiridoGina[sel1==0 & sel2==1] <- 1
mapa$huizacheGina[sel1==0 & sel2==0] <- 1
# verifica que categorías sean exhaustivas y mutuamente excluyentes
#table(rowSums(mapa[,c("perdido","conservado","adquirido","huizache")]))
# explora
table(mapa$perdidoGina)
table(mapa$conservadoGina)
table(mapa$adquiridoGina)
table(mapa$huizacheGina)
# habrá que exportar secciones de cada
#mapa$seccion[which(mapa$conservadoGina==1)]
# manda info a datos encuesta
dat$dperdidoGina <- 0;    dat$dperdidoGina[which(dat$Secc %in% mapa$seccion[which(mapa$perdidodoGina==1)])] <- 1
dat$dconservadoGina <- 0; dat$dconservadoGina[which(dat$Secc %in% mapa$seccion[which(mapa$conservadoGina==1)])] <- 1
dat$dadquiridoGina <- 0;  dat$dadquiridoGina[which(dat$Secc %in% mapa$seccion[which(mapa$adquiridoGina==1)])] <- 1
#
table(dat$dperdidoGina)
table(dat$dconservadoGina)
table(dat$dadquiridoGina)

# crea categorías 
mapa$huizacheAnaIsabel <- mapa$adquiridoAnaIsabel <- mapa$conservadoAnaIsabel <- mapa$perdidoAnaIsabel <- 0
# identifica secciones pertenecientes a distrito del viejo/nuevo mapa de AnaIsabel Gtz
sel1 <- as.numeric(mapa$disn14==10)
sel2 <- as.numeric(mapa$munn==33)
# codifica categorías
mapa$perdidoAnaIsabel[sel1==1 & sel2==0] <- 1
mapa$conservadoAnaIsabel[sel1==1 & sel2==1] <- 1
mapa$adquiridoAnaIsabel[sel1==0 & sel2==1] <- 1
mapa$huizacheAnaIsabel[sel1==0 & sel2==0] <- 1
# verifica que categorías sean exhaustivas y mutuamente excluyentes
#table(rowSums(mapa[,c("perdido","conservado","adquirido","huizache")]))
# explora
table(mapa$perdidoAnaIsabel)
table(mapa$conservadoAnaIsabel)
table(mapa$adquiridoAnaIsabel)
table(mapa$huizacheAnaIsabel)
# habrá que exportar secciones de cada
#mapa$seccion[which(mapa$conservadoAnaIsabel==1)]
# manda info a datos encuesta
dat$dperdidoAnaIsabel <- 0;    dat$dperdidoAnaIsabel[which(dat$Secc %in% mapa$seccion[which(mapa$perdidodoAnaIsabel==1)])] <- 1
dat$dconservadoAnaIsabel <- 0; dat$dconservadoAnaIsabel[which(dat$Secc %in% mapa$seccion[which(mapa$conservadoAnaIsabel==1)])] <- 1
dat$dadquiridoAnaIsabel <- 0;  dat$dadquiridoAnaIsabel[which(dat$Secc %in% mapa$seccion[which(mapa$adquiridoAnaIsabel==1)])] <- 1
#
table(dat$dperdidoAnaIsabel)
table(dat$dconservadoAnaIsabel)
table(dat$dadquiridoAnaIsabel)

# crea categorías 
mapa$huizacheSonia <- mapa$adquiridoSonia <- mapa$conservadoSonia <- mapa$perdidoSonia <- 0
# identifica secciones pertenecientes a distrito del viejo/nuevo mapa de Sonia Gtz
sel1 <- as.numeric(mapa$disn14==16)
sel2 <- as.numeric(mapa$munn==25)
# codifica categorías
mapa$perdidoSonia[sel1==1 & sel2==0] <- 1
mapa$conservadoSonia[sel1==1 & sel2==1] <- 1
mapa$adquiridoSonia[sel1==0 & sel2==1] <- 1
mapa$huizacheSonia[sel1==0 & sel2==0] <- 1
# verifica que categorías sean exhaustivas y mutuamente excluyentes
#table(rowSums(mapa[,c("perdido","conservado","adquirido","huizache")]))
# explora
table(mapa$perdidoSonia)
table(mapa$conservadoSonia)
table(mapa$adquiridoSonia)
table(mapa$huizacheSonia)
# habrá que exportar secciones de cada
#mapa$seccion[which(mapa$conservadoSonia==1)]
# manda info a datos encuesta
dat$dperdidoSonia <- 0;    dat$dperdidoSonia[which(dat$Secc %in% mapa$seccion[which(mapa$perdidodoSonia==1)])] <- 1
dat$dconservadoSonia <- 0; dat$dconservadoSonia[which(dat$Secc %in% mapa$seccion[which(mapa$conservadoSonia==1)])] <- 1
dat$dadquiridoSonia <- 0;  dat$dadquiridoSonia[which(dat$Secc %in% mapa$seccion[which(mapa$adquiridoSonia==1)])] <- 1
#
table(dat$dperdidoSonia)
table(dat$dconservadoSonia)
table(dat$dadquiridoSonia)


# crea categorías 
mapa$huizacheLariza <- mapa$adquiridoLariza <- mapa$conservadoLariza <- mapa$perdidoLariza <- 0
# identifica secciones pertenecientes a distrito del viejo/nuevo mapa de Lariza Gtz
sel1 <- 1 #as.numeric(mapa$disn14==10)
sel2 <- as.numeric(mapa$munn==33)
# codifica categorías
mapa$perdidoLariza[sel1==1 & sel2==0] <- 1
mapa$conservadoLariza[sel1==1 & sel2==1] <- 1
mapa$adquiridoLariza[sel1==0 & sel2==1] <- 1
mapa$huizacheLariza[sel1==0 & sel2==0] <- 1
# verifica que categorías sean exhaustivas y mutuamente excluyentes
#table(rowSums(mapa[,c("perdido","conservado","adquirido","huizache")]))
# explora
table(mapa$perdidoLariza)
table(mapa$conservadoLariza)
table(mapa$adquiridoLariza)
table(mapa$huizacheLariza)
# habrá que exportar secciones de cada
#mapa$seccion[which(mapa$conservadoLariza==1)]
# manda info a datos encuesta
dat$dperdidoLariza <- 0;    dat$dperdidoLariza[which(dat$Secc %in% mapa$seccion[which(mapa$perdidodoLariza==1)])] <- 1
dat$dconservadoLariza <- 0; dat$dconservadoLariza[which(dat$Secc %in% mapa$seccion[which(mapa$conservadoLariza==1)])] <- 1
dat$dadquiridoLariza <- 0;  dat$dadquiridoLariza[which(dat$Secc %in% mapa$seccion[which(mapa$adquiridoLariza==1)])] <- 1
#
table(dat$dperdidoLariza)
table(dat$dconservadoLariza)
table(dat$dadquiridoLariza)

# crea categorías 
mapa$huizacheArmando <- mapa$adquiridoArmando <- mapa$conservadoArmando <- mapa$perdidoArmando <- 0
# identifica secciones pertenecientes a distrito del viejo/nuevo mapa de Armando Gtz
sel1 <- 1; #as.numeric(mapa$disn14==10)
sel2 <- as.numeric(mapa$munn==33)
# codifica categorías
mapa$perdidoArmando[sel1==1 & sel2==0] <- 1
mapa$conservadoArmando[sel1==1 & sel2==1] <- 1
mapa$adquiridoArmando[sel1==0 & sel2==1] <- 1
mapa$huizacheArmando[sel1==0 & sel2==0] <- 1
# verifica que categorías sean exhaustivas y mutuamente excluyentes
#table(rowSums(mapa[,c("perdido","conservado","adquirido","huizache")]))
# explora
table(mapa$perdidoArmando)
table(mapa$conservadoArmando)
table(mapa$adquiridoArmando)
table(mapa$huizacheArmando)
# habrá que exportar secciones de cada
#mapa$seccion[which(mapa$conservadoArmando==1)]
# manda info a datos encuesta
dat$dperdidoArmando <- 0;    dat$dperdidoArmando[which(dat$Secc %in% mapa$seccion[which(mapa$perdidodoArmando==1)])] <- 1
dat$dconservadoArmando <- 0; dat$dconservadoArmando[which(dat$Secc %in% mapa$seccion[which(mapa$conservadoArmando==1)])] <- 1
dat$dadquiridoArmando <- 0;  dat$dadquiridoArmando[which(dat$Secc %in% mapa$seccion[which(mapa$adquiridoArmando==1)])] <- 1
#
table(dat$dperdidoArmando)
table(dat$dconservadoArmando)
table(dat$dadquiridoArmando)

# crea categorías 
mapa$huizacheLeonel <- mapa$adquiridoLeonel <- mapa$conservadoLeonel <- mapa$perdidoLeonel <- 0
# identifica secciones pertenecientes a distrito del viejo/nuevo mapa de Leonel Gtz
sel1 <- 1; #as.numeric(mapa$disn14==10)
sel2 <- as.numeric(mapa$munn==17)
# codifica categorías
mapa$perdidoLeonel[sel1==1 & sel2==0] <- 1
mapa$conservadoLeonel[sel1==1 & sel2==1] <- 1
mapa$adquiridoLeonel[sel1==0 & sel2==1] <- 1
mapa$huizacheLeonel[sel1==0 & sel2==0] <- 1
# verifica que categorías sean exhaustivas y mutuamente excluyentes
#table(rowSums(mapa[,c("perdido","conservado","adquirido","huizache")]))
# explora
table(mapa$perdidoLeonel)
table(mapa$conservadoLeonel)
table(mapa$adquiridoLeonel)
table(mapa$huizacheLeonel)
# habrá que exportar secciones de cada
#mapa$seccion[which(mapa$conservadoLeonel==1)]
# manda info a datos encuesta
dat$dperdidoLeonel <- 0;    dat$dperdidoLeonel[which(dat$Secc %in% mapa$seccion[which(mapa$perdidodoLeonel==1)])] <- 1
dat$dconservadoLeonel <- 0; dat$dconservadoLeonel[which(dat$Secc %in% mapa$seccion[which(mapa$conservadoLeonel==1)])] <- 1
dat$dadquiridoLeonel <- 0;  dat$dadquiridoLeonel[which(dat$Secc %in% mapa$seccion[which(mapa$adquiridoLeonel==1)])] <- 1
#
table(dat$dperdidoLeonel)
table(dat$dconservadoLeonel)
table(dat$dadquiridoLeonel)

# crea categorías 
mapa$huizacheLencho <- mapa$adquiridoLencho <- mapa$conservadoLencho <- mapa$perdidoLencho <- 0
# identifica secciones pertenecientes a distrito del viejo/nuevo mapa de Lencho Gtz
sel1 <- as.numeric(mapa$disn14==11)
sel2 <- as.numeric(mapa$munn==10)
# codifica categorías
mapa$perdidoLencho[sel1==1 & sel2==0] <- 1
mapa$conservadoLencho[sel1==1 & sel2==1] <- 1
mapa$adquiridoLencho[sel1==0 & sel2==1] <- 1
mapa$huizacheLencho[sel1==0 & sel2==0] <- 1
# verifica que categorías sean exhaustivas y mutuamente excluyentes
#table(rowSums(mapa[,c("perdido","conservado","adquirido","huizache")]))
# explora
table(mapa$perdidoLencho)
table(mapa$conservadoLencho)
table(mapa$adquiridoLencho)
table(mapa$huizacheLencho)
# habrá que exportar secciones de cada
#mapa$seccion[which(mapa$conservadoLencho==1)]
# manda info a datos encuesta
dat$dperdidoLencho <- 0;    dat$dperdidoLencho[which(dat$Secc %in% mapa$seccion[which(mapa$perdidodoLencho==1)])] <- 1
dat$dconservadoLencho <- 0; dat$dconservadoLencho[which(dat$Secc %in% mapa$seccion[which(mapa$conservadoLencho==1)])] <- 1
dat$dadquiridoLencho <- 0;  dat$dadquiridoLencho[which(dat$Secc %in% mapa$seccion[which(mapa$adquiridoLencho==1)])] <- 1
#
table(dat$dperdidoLencho)
table(dat$dconservadoLencho)
table(dat$dadquiridoLencho)

# hay incumbent en boleta
dat$dincumbDip <- dat$dconservadoJavier + dat$dconservadoLily + dat$dconservadoGina       # incumbent quiere ser dip
dat$dincumbMun <- dat$dconservadoAnaIsabel + dat$dconservadoSonia + dat$dconservadoLencho # incumbent quiere ser pm
table(dat$dincumbDip)

# tiene smartphone
tmp <- as.numeric(dat$p30) # quita factor
dat$dsmartPh <- as.numeric(tmp==1)

# regression
# favor reeleccion
model <- glm(dfavorReel ~ dinteresaPol + dsmartPh + dpan + dpri + dmorena, data = dat, family = "binomial")
summary(model)
# ha hecho algo
model <- glm(dhaHecho ~ dinteresaPol*dincumbDip + dsmartPh + dpan + dpri + dmorena + dincumbMun, data = dat, family = "binomial")
summary(model)
# name recognition
#model <- lm(dconoceGina ~  dconservadoGina + dperdidoGina + dadquiridoGina + dinteresaPol + dpan + dpri + dmorena, data = dat)
#summary(model)
model1 <- glm(dconoceJavier ~  dconservadoJavier + dhaHecho + dinteresaPol + dsmartPh + dpan + dpri + dmorena, data = dat, family = "binomial")
summary(model1)
model2 <- glm(dconoceLily ~  dconservadoLily + dhaHecho + dinteresaPol + dsmartPh + dpan + dpri + dmorena, data = dat, family = "binomial")
summary(model2)
model3 <- glm(dconoceGina ~  dconservadoGina + dhaHecho + dinteresaPol + dsmartPh + dpan + dpri + dmorena, data = dat, family = "binomial")
summary(model3)
model4 <- glm(dconoceAnaIsabel ~  dconservadoAnaIsabel + dhaHecho + dinteresaPol + dsmartPh + dpan + dpri + dmorena, data = dat, family = "binomial")
summary(model4)
model5 <- glm(dconoceSonia ~  dconservadoSonia + dhaHecho + dinteresaPol + dsmartPh + dpan + dpri + dmorena, data = dat, family = "binomial")
summary(model5)
model6 <- glm(dconoceLencho ~  dconservadoLencho + dhaHecho + dinteresaPol + dsmartPh + dpan + dpri + dmorena, data = dat, family = "binomial")
summary(model6)
model7 <- glm(dconoceLariza ~  dconservadoLariza + dhaHecho + dinteresaPol + dsmartPh + dpan + dpri + dmorena, data = dat, family = "binomial")
summary(model7)
model8 <- glm(dconoceArmando ~  dconservadoArmando + dhaHecho + dinteresaPol + dsmartPh + dpan + dpri + dmorena, data = dat, family = "binomial")
summary(model8)
model9 <- glm(dconoceLeonel ~  dconservadoLeonel + dhaHecho + dinteresaPol + dsmartPh + dpan + dpri + dmorena, data = dat, family = "binomial")
summary(model9)

# para reportar tabla hay que homogeneizar nombres de vars...
tmp <- dat # duplica
tmp$dconoce <- tmp$dconoceJavier; tmp$dconservado <- tmp$dconservadoJavier; 
tmp$dconoceJavier <- tmp$dconservadoJavier <- NULL
tmp1 <- glm(dconoce ~  dconservado + dhaHecho + dinteresaPol + dsmartPh + dpan + dpri + dmorena, data = tmp, family = "binomial")
summary(tmp1)
tmp <- dat # duplica
tmp$dconoce <- tmp$dconoceLily; tmp$dconservado <- tmp$dconservadoLily; 
tmp$dconoceLily <- tmp$dconservadoLily <- NULL
tmp2 <- glm(dconoce ~  dconservado + dhaHecho + dinteresaPol + dsmartPh + dpan + dpri + dmorena, data = tmp, family = "binomial")
summary(tmp2)
tmp <- dat # duplica
tmp$dconoce <- tmp$dconoceGina; tmp$dconservado <- tmp$dconservadoGina; 
tmp$dconoceGina <- tmp$dconservadoGina <- NULL
tmp3 <- glm(dconoce ~  dconservado + dhaHecho + dinteresaPol + dsmartPh + dpan + dpri + dmorena, data = tmp, family = "binomial")
summary(tmp3)
tmp <- dat # duplica
tmp$dconoce <- tmp$dconoceAnaIsabel; tmp$dconservado <- tmp$dconservadoAnaIsabel; 
tmp$dconoceAnaIsabel <- tmp$dconservadoAnaIsabel <- NULL
tmp4 <- glm(dconoce ~  dconservado + dhaHecho + dinteresaPol + dsmartPh + dpan + dpri + dmorena, data = tmp, family = "binomial")
summary(tmp4)
tmp <- dat # duplica
tmp$dconoce <- tmp$dconoceSonia; tmp$dconservado <- tmp$dconservadoSonia; 
tmp$dconoceSonia <- tmp$dconservadoSonia <- NULL
tmp5 <- glm(dconoce ~  dconservado + dhaHecho + dinteresaPol + dsmartPh + dpan + dpri + dmorena, data = tmp, family = "binomial")
summary(tmp5)
tmp <- dat # duplica
tmp$dconoce <- tmp$dconoceLencho; tmp$dconservado <- tmp$dconservadoLencho; 
tmp$dconoceLencho <- tmp$dconservadoLencho <- NULL
tmp6 <- glm(dconoce ~  dconservado + dhaHecho + dinteresaPol + dsmartPh + dpan + dpri + dmorena, data = tmp, family = "binomial")
summary(tmp6)
tmp <- dat # duplica
tmp$dconoce <- tmp$dconoceLariza; tmp$dconservado <- tmp$dconservadoLariza; 
tmp$dconoceLariza <- tmp$dconservadoLariza <- NULL
tmp7 <- glm(dconoce ~  dconservado + dhaHecho + dinteresaPol + dsmartPh + dpan + dpri + dmorena, data = tmp, family = "binomial")
summary(tmp7)
tmp <- dat # duplica
tmp$dconoce <- tmp$dconoceArmando; tmp$dconservado <- tmp$dconservadoArmando; 
tmp$dconoceArmando <- tmp$dconservadoArmando <- NULL
tmp8 <- glm(dconoce ~  dconservado + dhaHecho + dinteresaPol + dsmartPh + dpan + dpri + dmorena, data = tmp, family = "binomial")
summary(tmp8)
tmp <- dat # duplica
tmp$dconoce <- tmp$dconoceLeonel; tmp$dconservado <- tmp$dconservadoLeonel; 
tmp$dconoceLeonel <- tmp$dconservadoLeonel <- NULL
tmp9 <- glm(dconoce ~  dconservado + dhaHecho + dinteresaPol + dsmartPh + dpan + dpri + dmorena, data = tmp, family = "binomial")
summary(tmp9)
library(stargazer)
stargazer(tmp1, tmp2, tmp3, tmp4, tmp5, tmp6, tmp7, tmp8, tmp9, title="Resultados OLS", align=TRUE, report = ('vc*p'))

rm(tmp, tmp1, tmp2, tmp3, tmp4, tmp5, tmp6, tmp7, tmp8, tmp9)

          

